import{r as d}from"./index.Dy6lLLXr.js";var m={exports:{}},p={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g;function y(){if(g)return p;g=1;var t=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function h(f,n,a){var o=null;if(a!==void 0&&(o=""+a),n.key!==void 0&&(o=""+n.key),"key"in n){a={};for(var u in n)u!=="key"&&(a[u]=n[u])}else a=n;return n=a.ref,{$$typeof:t,type:f,key:o,ref:n!==void 0?n:null,props:a}}return p.Fragment=l,p.jsx=h,p.jsxs=h,p}var j;function P(){return j||(j=1,m.exports=y()),m.exports}var s=P();const I=()=>{const[t,l]=d.useState({verticalPerspective:0,horizontalPerspective:0,rotation:0,scale:1,offsetX:0,offsetY:0}),[h,f]=d.useState({width:0,height:0});d.useRef(null);const n=d.useRef(null),a=d.useRef(null),o=(e=a.current)=>{const i=e?.getContext("2d"),r=n.current;if(!e||!i||!r)return;const x=e===a.current;if(x){const v=Math.min(1,1200/Math.max(r.width,r.height));e.width=r.width*v,e.height=r.height*v}else e.width=r.width,e.height=r.height;i.fillStyle="#000",i.fillRect(0,0,e.width,e.height),i.save(),i.translate(e.width/2+t.offsetX*(x?1:r.width/e.width),e.height/2+t.offsetY*(x?1:r.height/e.height)),i.rotate(t.rotation*Math.PI/180),i.scale(t.scale,t.scale);const c=t.verticalPerspective/1e3,R=t.horizontalPerspective/1e3;i.transform(1,0,0,1,R*e.width,c*e.height),i.drawImage(r,-r.width/2,-r.height/2,r.width,r.height),i.restore()},u=()=>{const e=document.createElement("canvas");o(e);const i=document.createElement("a");i.download="edited-image.png",i.href=e.toDataURL("image/png",1),i.click()},w=e=>{const i=e.target.files[0];if(!i)return;const r=new FileReader;r.onload=x=>{const c=new Image;c.onload=()=>{n.current=c,f({width:c.width,height:c.height}),o()},c.src=x.target?.result},r.readAsDataURL(i)};return d.useEffect(()=>{n.current&&o()},[t]),s.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("canvas",{ref:a,className:"w-full border rounded"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsxs("label",{children:["Vertical Perspective: ",t.verticalPerspective]}),s.jsx("input",{type:"range",min:"-100",max:"100",value:t.verticalPerspective,onChange:e=>l({...t,verticalPerspective:parseInt(e.target.value)}),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{children:["Horizontal Perspective: ",t.horizontalPerspective]}),s.jsx("input",{type:"range",min:"-100",max:"100",value:t.horizontalPerspective,onChange:e=>l({...t,horizontalPerspective:parseInt(e.target.value)}),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{children:["Rotation: ",t.rotation,"°"]}),s.jsx("input",{type:"range",min:"-45",max:"45",value:t.rotation,onChange:e=>l({...t,rotation:parseInt(e.target.value)}),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{children:["Scale: ",t.scale.toFixed(2),"x"]}),s.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:t.scale,onChange:e=>l({...t,scale:parseFloat(e.target.value)}),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{children:["Horizontal Offset: ",t.offsetX,"px"]}),s.jsx("input",{type:"range",min:"-200",max:"200",value:t.offsetX,onChange:e=>l({...t,offsetX:parseInt(e.target.value)}),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{children:["Vertical Offset: ",t.offsetY,"px"]}),s.jsx("input",{type:"range",min:"-200",max:"200",value:t.offsetY,onChange:e=>l({...t,offsetY:parseInt(e.target.value)}),className:"w-full"})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("button",{onClick:u,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save Image"}),h.width>0&&s.jsxs("span",{className:"text-sm text-gray-600",children:["Original Size: ",h.width," × ",h.height]})]})]}),s.jsx("input",{type:"file",accept:"image/*",onChange:w})]})};export{I as default};
